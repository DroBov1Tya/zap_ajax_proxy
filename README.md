# AJAX ZAP Proxy

**AJAX ZAP Proxy** — Программа разворачивает локальный прокси-сервис, который асинхронно перехватывает URL-адреса из запросов, добавляет их в очередь и отправляет в AJAX-сканнер ZAP для выявления уязвимостей.

## Основные возможности
- Запускает локальный прокси на порту `8010` для асинхронного перехвата и анализа запросов.
- Уникальные URL-адреса добавляются в очередь для последующего сканирования.
- Использует асинхронную обработку с поддержкой **мьютексов** для безопасной передачи данных между потоками.
- В цикле URL-адреса из очереди проверяются и передаются в AJAX-сканнер ZAP.
- Если сканирование продолжается, URL возвращается обратно в очередь и повторно отправляется на сканирование, пока очередь не опустеет.

## Сборка и запуск

1. Склонируйте репозиторий и перейдите в директорию проекта.
2. Соберите проект с помощью команды:

   ```bash
   cargo build --release
   ```

3. Запустите скрипт, указав токен ZAP:

   ```bash
   ./ajax_zap_api -t {zap_token}
   ```

4. Дополнительные флаги (в разработке):
    * -p    proxy port (для использования кастомного порта прокси)
    * -z    zap port (кастомный порт zap)

## Как это работает

1. При запуске локальный прокси сервис поднимается на порту `8010`.
2. Все запросы, проходящие через прокси, асинхронно перехватываются, а их URL-адреса добавляются в очередь.
3. Благодаря **мьютексам**, обеспечивается безопасная и синхронизированная передача данных между потоками при работе с очередью.
4. В асинхронном цикле происходит обработка URL-ов:
   - Если URL еще не сканировался, он отправляется в AJAX-сканнер ZAP.
   - Если сканирование URL находится в процессе, URL добавляется обратно в очередь и проверяется повторно через некоторое время.
5. Цикл продолжается до тех пор, пока все URL не будут обработаны.

## Конфигурация по умолчанию
- **Порт прокси**: `8010`
- **Порт ZAP**: `8080`

## Примечания
- Убедитесь, что вы используете действительный ZAP-токен для авторизации API-запросов.
